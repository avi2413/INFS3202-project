(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{303:function(e,t,a){},372:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(13),r=a.n(i),s=a(85),o=a(75),l=a(260),d=a(261),j=(a(303),a(401)),u=a(59),b=a(21),p=a(63),h=a.n(p),m=a(94),x=a(10),O=a(23),f=a(9),g=a(128),v=a(418),y=a(69),S=a(238),k=a(402),w=a(262),C=a(266),I=a.n(C),N=a(237),L=Object(N.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},root:{"& .MuiTextField-root":{margin:e.spacing(1)}},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},googleButton:{marginBottom:e.spacing(2)}}})),T=a(398),F=a(400),D=a(167),P=a(264),A=a.n(P),R=a(265),B=a.n(R),W=a(4),U=function(e){var t=e.name,a=e.handleChange,n=e.label,c=e.half,i=e.autoFocus,r=e.type,s=e.handleShowPassword;return Object(W.jsx)(S.a,{item:!0,xs:12,sm:c?6:12,children:Object(W.jsx)(T.a,{name:t,onChange:a,variant:"outlined",required:!0,fullWidth:!0,label:n,autoFocus:i,type:r,InputProps:"password"===t?{endAdornment:Object(W.jsx)(F.a,{position:"end",children:Object(W.jsx)(D.a,{onClick:s,children:"password"===r?Object(W.jsx)(A.a,{}):Object(W.jsx)(B.a,{})})})}:null})})},z=function(){return Object(W.jsx)("svg",{style:{width:"20px",height:"20px"},viewBox:"0 0 24 24",children:Object(W.jsx)("path",{fill:"currentColor",d:"M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.2,4.73C15.29,4.73 17.1,6.7 17.1,6.7L19,4.72C19,4.72 16.56,2 12.1,2C6.42,2 2.03,6.8 2.03,12C2.03,17.05 6.16,22 12.25,22C17.6,22 21.5,18.33 21.5,12.91C21.5,11.76 21.35,11.1 21.35,11.1V11.1Z"})})},J="AUTH",E="LOGOUT",_=a(26),M=a.n(_),V=M.a.create({baseURL:"https://calm-fortress-17635.herokuapp.com"}),G=function(e){return V.post("/users/signin",e)},H=function(e){return V.post("/users/signup",e)},Y={firstName:"",lastName:"",email:"",password:"",confirmPassword:""},q=function(){var e=L(),t=Object(n.useState)(!1),a=Object(f.a)(t,2),c=a[0],i=a[1],r=Object(n.useState)(!1),o=Object(f.a)(r,2),l=o[0],d=o[1],u=Object(n.useState)(Y),p=Object(f.a)(u,2),C=p[0],N=p[1],T=Object(s.b)(),F=Object(b.f)(),D=function(e){N(Object(O.a)(Object(O.a)({},C),{},Object(x.a)({},e.target.name,e.target.value)))},P=function(){var e=Object(m.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=null===t||void 0===t?void 0:t.profileObj,n=null===t||void 0===t?void 0:t.tokenId;try{T({type:"AUTH",data:{result:a,token:n}}),F.push("/homepage")}catch(c){console.log(c)}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(W.jsx)(j.a,{component:"main",maxWidth:"xs",children:Object(W.jsxs)(g.a,{className:e.paper,elevation:3,children:[Object(W.jsx)(v.a,{className:e.avatar,children:Object(W.jsx)(I.a,{})}),Object(W.jsx)(y.a,{varient:"h5",children:c?"Sign Up":"Sign In"}),Object(W.jsxs)("form",{className:e.form,onSubmit:function(e){e.preventDefault(),T(c?function(e,t){return function(){var a=Object(m.a)(h.a.mark((function a(n){var c,i;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,H(e);case 3:c=a.sent,i=c.data,n({type:J,data:i}),t.push("/homepage"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(C,F):function(e,t){return function(){var a=Object(m.a)(h.a.mark((function a(n){var c,i;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,G(e);case 3:c=a.sent,i=c.data,n({type:J,data:i}),t.push("/homepage"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0.response.data);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(C,F))},children:[Object(W.jsxs)(S.a,{container:!0,spacing:2,children:[c&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(U,{name:"firstName",label:"First Name",handleChange:D,autoFocus:!0,half:!0}),Object(W.jsx)(U,{name:"lastName",label:"Last Name",handleChange:D,half:!0})]}),Object(W.jsx)(U,{name:"email",label:"Email Address",handleChange:D,type:"email"}),Object(W.jsx)(U,{name:"password",label:"Password",handleChange:D,type:l?"text":"password",handleShowPassword:function(){d((function(e){return!e}))}}),c&&Object(W.jsx)(U,{name:"confirmPassword",label:"Confirm Password",handleChange:D,type:"password"})]}),Object(W.jsx)(k.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:c?"Sign Up":"Sign In"}),Object(W.jsx)(w.GoogleLogin,{clientId:"846774650020-10bvf141qpacfkhjcgef4r9r2req691m.apps.googleusercontent.com",render:function(t){return Object(W.jsx)(k.a,{className:e.googleButton,color:"primary",variant:"contained",fullWidth:!0,onClick:t.onClick,disabled:t.disabled,startIcon:Object(W.jsx)(z,{}),children:"Google Sign In"})},onSuccess:P,onFailure:function(){console.log("Google sign in was unsuccessful. Try Again Later.")},cookiePolicy:"single_host_origin"}),Object(W.jsx)(S.a,{container:!0,justify:"flex-end",children:Object(W.jsx)(S.a,{item:!0,children:Object(W.jsx)(k.a,{onClick:function(){i((function(e){return!e})),d(!1)},children:c?"Already have an account? Sign In":"Don't have an account? Sign Up"})})})]})]})})},Z=a(403),$=a(404),K=a(405),Q=a(406),X=a(384),ee=a(407),te=a(247),ae=a(171),ne=a.n(ae),ce=a(267),ie=a.n(ce),re=Object(N.a)({container:{},root:{marginTop:20,elevation:"{3}"},media:{height:320},large:{width:60,height:60,background:te.a[200]}}),se=M.a.create({baseURL:"https://calm-fortress-17635.herokuapp.com"});var oe=function(){var e=JSON.parse(localStorage.getItem("profile")),t=re(),a=Object(b.f)(),c=Object(n.useState)([]),i=Object(f.a)(c,2),r=i[0],s=i[1],o=Object(n.useState)(!1),l=Object(f.a)(o,2),d=l[0],u=l[1],p=Object(n.useState)(""),h=Object(f.a)(p,2),m=h[0],x=h[1],O=Object(n.useState)([]),g=Object(f.a)(O,2),S=g[0],w=g[1];Object(n.useEffect)((function(){se.get("/video/getVideos").then((function(e){e.data.success?s(e.data.videos):alert("Problem fetching video from server")}))}),[]);var C=function(){u(!d)},I=function(e){var t={title:m};e.preventDefault(),se.post("/video/searchVideo",t).then((function(e){e.data.success?(w(e.data.video[0]),x(""),console.log(S._id),void 0!==S._id&&a.push("/".concat(S._id))):alert("Problem searching")}))},N=r.map((function(a,n){var c=Math.floor(a.duration/60),i=Math.floor(a.duration-60*c);return i<6&&(i*=10),Object(W.jsx)("div",{children:e.result.email===a.writer.email||0!==a.privacy?Object(W.jsx)(Z.a,{className:t.root,children:Object(W.jsxs)($.a,{children:[Object(W.jsx)(K.a,{children:Object(W.jsx)("div",{style:{position:"relative"},children:Object(W.jsxs)("a",{href:"/".concat(a._id),children:[Object(W.jsx)("img",{style:{width:"100%",height:"300px"},alt:"thumbnail",src:"".concat("https://calm-fortress-17635.herokuapp.com","/").concat(a.thumbnail)}),Object(W.jsx)("div",{className:" duration",style:{bottom:0,right:0,position:"absolute",margin:"4px",color:"#fff",backgroundColor:"rgba(17, 17, 17, 0.8)",opacity:.8,padding:"2px 4px",borderRadius:"2px",letterSpacing:"0.5px",fontSize:"12px",fontWeight:"500",lineHeight:"12px"},children:Object(W.jsxs)("span",{children:[c,":",i]})})]})})}),Object(W.jsx)(Q.a,{avatar:Object(W.jsx)(v.a,{src:a.writer.name,className:t.large,children:a.writer.name.charAt(0)+a.writer.name.split(" ")[1].charAt(0)}),title:Object(W.jsx)(y.a,{gutterBottom:!0,variant:"h5",component:"h4",children:a.title}),subheader:Object(W.jsxs)("div",{children:[Object(W.jsx)("div",{style:{position:"absolute",flexBasis:"50%"},children:Object(W.jsx)(y.a,{variant:"body2",color:"textSecondary",component:"p",children:a.writer.name})}),Object(W.jsx)("div",{style:{flexBasis:"50%",position:"relative"},children:Object(W.jsxs)(y.a,{variant:"body1",color:"textSecondary",style:{float:"right",paddingRight:"5px"},children:[a.views," views"]})})]})})]})}):null})}));return Object(W.jsxs)(j.a,{maxWidth:"lg",className:t.container,children:[Object(W.jsx)(X.a,{in:d,children:Object(W.jsxs)("form",{style:{display:"flex"},onSubmit:I,children:[Object(W.jsx)(D.a,{onClick:C,children:Object(W.jsx)(ie.a,{})}),Object(W.jsx)("br",{}),Object(W.jsx)(T.a,{label:"Search",variant:"filled",fullWidth:!0,onChange:function(e){x(e.currentTarget.value)},value:m}),Object(W.jsx)("br",{}),Object(W.jsx)(k.a,{disableElevation:!0,variant:"contained",color:"primary",onClick:I,children:Object(W.jsx)(ne.a,{})})]})}),Object(W.jsx)(y.a,{variant:"h3",component:"h1",children:"Watch Now"}),Object(W.jsx)("hr",{}),Object(W.jsx)("div",{children:N}),Object(W.jsx)("div",{style:{position:"sticky",bottom:"50px",marginLeft:"450px"},children:Object(W.jsx)(ee.a,{color:"primary",onClick:C,children:Object(W.jsx)(ne.a,{})})})]})},le=a(408),de=a(409),je=a(113),ue=a(248),be=a(77),pe=a(269),he=a.n(pe),me=a(268),xe=Object(N.a)((function(e){return{appBar:{borderRadius:0,display:"flex",flexDirection:"row",justifyContent:"space-between",padding:"15px 10px",background:"#ff9800",marginBottom:"10px"},heading:{color:"white",fontWeight:"bold",textDecoration:"none",paddingTop:"5px"},toolbar:{display:"flex",justifyContent:"flex-end"},profile:{display:"flex",justifyContent:"space-between",width:"100px"},userName:{display:"flex",alignItems:"center"},brandContainer:{display:"flex",alignItems:"center",alignContent:"center",margin:"auto"},purple:{color:e.palette.getContrastText(te.a[500]),backgroundColor:te.a[500],width:55,height:55}}})),Oe=function(){var e=xe(),t=Object(n.useState)(JSON.parse(localStorage.getItem("profile"))),a=Object(f.a)(t,2),i=a[0],r=a[1],o=Object(s.b)(),l=Object(b.f)(),d=Object(b.g)(),p=function(){o({type:"LOGOUT"}),l.push("/"),r(null)};Object(n.useEffect)((function(){var e=null===i||void 0===i?void 0:i.token;e&&(1e3*Object(me.a)(e).exp<(new Date).getTime()&&p());r(JSON.parse(localStorage.getItem("profile")))}),[d]);var h=c.a.useState(null),m=Object(f.a)(h,2),x=m[0],O=m[1];return Object(W.jsxs)(le.a,{className:e.appBar,position:"sticky",color:"inherit",children:[Object(W.jsx)(y.a,{className:e.heading,component:u.b,to:"/homepage",variant:"h3",align:"center",children:"VideoPedia"}),Object(W.jsx)(de.a,{className:e.toolbar,children:i?Object(W.jsx)("div",{children:Object(W.jsxs)(j.a,{className:e.profile,style:{paddingTop:"5px"},children:[Object(W.jsx)(v.a,{className:e.purple,alt:i.result.name,src:i.result.imageUrl,component:u.b,to:"/profile",children:i.result.name.charAt(0)+i.result.name.split(" ")[1].charAt(0)}),Object(W.jsx)(D.a,{"aria-label":"Actions",onClick:function(e){O(e.currentTarget)},children:Object(W.jsx)(he.a,{style:{color:be.a[50]},fontSize:"large"})}),Object(W.jsxs)(je.a,{id:"simple-menu",anchorEl:x,keepMounted:!0,open:Boolean(x),onClose:function(){O(null)},children:[Object(W.jsx)(ue.a,{onClick:p,children:"Logout"}),Object(W.jsx)(ue.a,{component:u.b,to:"/upload",children:"Upload"})]})]})}):Object(W.jsx)(k.a,{style:{color:"white",fontWeight:"Bold"},component:u.b,to:"/",children:"Sign In"})})]})},fe=a(271),ge=a.n(fe),ve=a(280),ye=a(249),Se=function(e){var t=e.name,a=e.handleChange,n=e.label,c=e.required,i=e.value;return Object(W.jsx)(S.a,{item:!0,xs:12,sm:12,children:Object(W.jsx)(T.a,{value:i,name:t,onChange:a,variant:"filled",required:c,fullWidth:!0,label:n})})},ke=[{value:0,label:"Private"},{value:1,label:"Public"}],we=M.a.create({baseURL:"https://calm-fortress-17635.herokuapp.com"});var Ce=function(e){var t=JSON.parse(localStorage.getItem("profile")),a=Object(n.useState)(""),c=Object(f.a)(a,2),i=c[0],r=c[1],s=Object(n.useState)(""),o=Object(f.a)(s,2),l=o[0],d=o[1],j=Object(n.useState)(""),u=Object(f.a)(j,2),b=u[0],p=u[1],h=Object(n.useState)(0),m=Object(f.a)(h,2),x=m[0],g=m[1],v=Object(n.useState)(""),w=Object(f.a)(v,2),C=w[0],I=w[1],N=Object(n.useState)(""),L=Object(f.a)(N,2),F=L[0],P=L[1];return Object(W.jsxs)("div",{style:{maxWidth:"700px",margin:"2rem auto"},children:[Object(W.jsx)("div",{style:{textAlign:"center",marginBottom:"2rem"},children:Object(W.jsx)(y.a,{variant:"h4",component:"h2",children:"Upload Video"})}),Object(W.jsxs)("form",{onSubmit:function(a){a.preventDefault();var n={writer:t.result._id,title:i,description:l,privacy:x,filePath:b,duration:C,thumbnail:F};if(""===i||""===b)return alert("Please fill all the required field\nand/or upload valid video");we.post("/video/uploadVideo",n).then((function(t){t.data.success?(alert("Video published successfully (^.^)/[YAYYYYY!!!!!!]"),e.history.push("/homepage")):alert("Failed to upload video. Server error!")}))},children:[Object(W.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(W.jsx)(ve.a,{onDrop:function(e){var t=new FormData;t.append("file",e[0]),we.post("/video/uploadfiles",t,{header:{"content-type":"multipart/form-data"}}).then((function(e){if(e.data.success){var t={filePath:e.data.filePath,fileName:e.data.fileName};p(e.data.filePath),we.post("/video/thumbnails",t).then((function(e){e.data.success?(P(e.data.thumbsFilePath),I(e.data.fileDuration)):alert("Thumbnail fetch failed. error 500!")}))}else alert("Uploading failed. Server error!")}))},multiple:!1,maxSize:8e8,children:function(e){var t=e.getRootProps,a=e.getInputProps;return Object(W.jsx)("section",{children:Object(W.jsxs)("div",Object(O.a)(Object(O.a)({style:{width:"300px",height:"240px",border:"5px solid grey"}},t()),{},{children:[Object(W.jsx)("input",Object(O.a)({},a())),Object(W.jsx)("div",{style:{textAlign:"center",position:"relative",padding:"40px"},children:Object(W.jsx)(D.a,{color:"primary",children:Object(W.jsx)(ge.a,{style:{fontSize:150,color:ye.a}})})})]}))})}}),""!==F&&Object(W.jsx)("div",{children:Object(W.jsx)("img",{src:"".concat("https://calm-fortress-17635.herokuapp.com","/").concat(F),alt:"img"})})]}),Object(W.jsx)("div",{style:{marginTop:"35px"},children:Object(W.jsx)(Se,{name:"title",label:"Title",handleChange:function(e){r(e.target.value)}})}),Object(W.jsx)("div",{style:{marginTop:"25px"},children:Object(W.jsx)(Se,{name:"description",label:"Description",handleChange:function(e){d(e.currentTarget.value)}})}),Object(W.jsx)("div",{style:{marginTop:"25px"},children:Object(W.jsx)(S.a,{item:!0,xs:12,sm:12,children:Object(W.jsx)(T.a,{id:"selection-menu",select:!0,label:"Visibility",value:x,onChange:function(e){g(e.target.value)},variant:"outlined",children:ke.map((function(e){return Object(W.jsx)(ue.a,{value:e.value,children:e.label},e.value)}))})})}),Object(W.jsx)("div",{style:{marginTop:"25px"},children:Object(W.jsx)(k.a,{type:"submit",variant:"contained",color:"primary",children:"Publish"})})]})]})},Ie=a(3),Ne=a(272),Le=a.n(Ne),Te=a(411),Fe=a(410),De=M.a.create({baseURL:"https://calm-fortress-17635.herokuapp.com"}),Pe="https://calm-fortress-17635.herokuapp.com",Ae=Object(N.a)((function(e){return{root:{display:"flex",height:"220px",background:"#eeeeee"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto",width:"220px"},cover:{width:"65%",justifyContent:"flex-start"},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)}}}));var Re=function(){var e=Ae(),t=Object(n.useState)([]),a=Object(f.a)(t,2),i=a[0],r=a[1],s=JSON.parse(localStorage.getItem("profile"));Object(n.useEffect)((function(){De.get("/video/getVideos").then((function(e){console.log(e.data),e.data.success?r(e.data.videos):alert("Problem fetching video from server")}))}),[]);var o=i.map((function(t,a){var n=Math.floor(t.duration/60),c=Math.floor(t.duration-60*n);return c<6&&(c*=10),Object(W.jsx)("div",{style:{marginBottom:"15px"},children:s.result.email===t.writer.email||0!==t.privacy?Object(W.jsxs)(Z.a,{className:e.root,children:[Object(W.jsxs)("div",{children:[Object(W.jsxs)(Fe.a,{className:e.content,children:[Object(W.jsx)(y.a,{gutterBottom:!0,variant:"h5",component:"h4",children:t.title}),Object(W.jsx)(y.a,{variant:"subtitle1",color:"textSecondary",children:t.writer.name})]}),Object(W.jsx)("div",{className:e.controls,children:Object(W.jsxs)(y.a,{variant:"body1",color:"textSecondary",children:[t.views," views"]})})]}),Object(W.jsx)(K.a,{className:e.cover,image:"".concat(Pe,"/").concat(t.thumbnail),children:Object(W.jsx)("div",{style:{position:"relative"},children:Object(W.jsxs)("a",{href:"/".concat(t._id),children:[Object(W.jsx)("img",{style:{width:"100%"},alt:"thumbnail",src:"".concat(Pe,"/").concat(t.thumbnail)}),Object(W.jsx)("div",{className:" duration",style:{bottom:0,right:0,position:"absolute",margin:"4px",color:"#fff",backgroundColor:"rgba(17, 17, 17, 0.8)",opacity:.8,padding:"2px 4px",borderRadius:"2px",letterSpacing:"0.5px",fontSize:"12px",fontWeight:"500",lineHeight:"12px"},children:Object(W.jsxs)("span",{children:[n,":",c]})})]})})})]}):null})}));return Object(W.jsx)(c.a.Fragment,{children:o})},Be=a(412),We=a(413),Ue=a(279),ze=a.n(Ue),Je=a(417),Ee=a(415),_e=a(165),Me=a(273),Ve=a.n(Me),Ge=a(14);a(363);var He=function(){return Object(W.jsx)("div",{style:{float:"right"},children:Object(W.jsx)(k.a,{children:"Subscribe"})})},Ye=a(127),qe=a.n(Ye),Ze=a(414);var $e=function(e){var t=new Date,a=t.getDate()+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]+" "+t.getFullYear(),i=Object(n.useState)(0),r=Object(f.a)(i,2),s=r[0],o=r[1],l=Object(n.useState)(!1),d=Object(f.a)(l,2),u=d[0],b=d[1];return Object(n.useEffect)((function(){var t=0;e.commentList.map((function(a){a.responseTo===e.parentCommentId&&t++,o(t)}))}),[e.commentList,e.parentCommentId]),Object(W.jsxs)(j.a,{children:[s>0&&Object(W.jsx)(k.a,{style:{marginLeft:"50px",color:"#3266a8"},onClick:function(){b(!u)},disableRipple:!0,children:u?"Collapse":s>1?"View ".concat(s," replies"):"View reply"}),Object(W.jsx)(X.a,{in:u,children:e.commentList&&e.commentList.map((function(t,n){return Object(W.jsx)(j.a,{style:{marginLeft:"50px",width:"80%"},children:Object(W.jsx)(c.a.Fragment,{children:t.responseTo===e.parentCommentId&&Object(W.jsx)("div",{children:Object(W.jsxs)(Z.a,{elevation:0,disableGutter:!0,children:[Object(W.jsx)(Q.a,{avatar:Object(W.jsx)(v.a,{children:t.writer.name.charAt(0)+t.writer.name.split(" ")[1].charAt(0)}),title:t.writer.name,subheader:a}),Object(W.jsx)(Fe.a,{children:Object(W.jsx)(y.a,{variant:"subtitle2",children:t.content})})]})})})})}))})]})},Ke=a(275),Qe=a.n(Ke),Xe=a(277),et=a.n(Xe),tt=a(276),at=a.n(tt),nt=a(278),ct=a.n(nt),it=M.a.create({baseURL:"https://calm-fortress-17635.herokuapp.com"});var rt=function(e){var t={};t=e.video?{videoId:e.videoId,userId:e.userId}:{commentId:e.commentId,userId:e.userId};var a=Object(n.useState)(0),i=Object(f.a)(a,2),r=i[0],s=i[1],o=Object(n.useState)(0),l=Object(f.a)(o,2),d=l[0],j=l[1],u=Object(n.useState)(null),b=Object(f.a)(u,2),p=b[0],h=b[1],m=Object(n.useState)(null),x=Object(f.a)(m,2),O=x[0],g=x[1];return Object(n.useEffect)((function(){it.post("/like/getLikes",t).then((function(t){t.data.success?(s(t.data.likes.length),t.data.likes.map((function(t){t.userId===e.userId&&h("liked")}))):alert("Like failed!")})),it.post("/like/getDisLikes",t).then((function(t){t.data.success?(j(t.data.dislikes.length),t.data.dislikes.map((function(t){t.userId===e.userId&&g("disliked")}))):alert("Dislike failed!")}))}),[]),Object(W.jsxs)(c.a.Fragment,{children:[Object(W.jsx)("span",{children:Object(W.jsxs)(D.a,{disableRipple:!0,disableFocusRipple:!0,onClick:function(e){e.stopPropagation(),null===p?it.post("/like/upLike",t).then((function(e){e.data.success?(s(r+1),h("liked"),null!==O&&(g(null),j(d-1))):alert("Failed to like")})):it.post("/like/unLike",t).then((function(e){e.data.success?(s(r-1),h(null)):alert("Failed to unlike")}))},children:["liked"===p?Object(W.jsx)(Qe.a,{style:{fontSize:20}}):Object(W.jsx)(at.a,{style:{fontSize:20}}),Object(W.jsx)(y.a,{style:{marginLeft:"5px",fontSize:"16"},children:r})]})}),Object(W.jsx)("span",{children:Object(W.jsxs)(D.a,{disableRipple:!0,disableFocusRipple:!0,edge:"end",onClick:function(e){e.stopPropagation(),null!==O?it.post("/like/unDisLike",t).then((function(e){e.data.success?(j(d-1),g(null)):alert("Failed to undislike")})):it.post("/like/upDisLike",t).then((function(e){e.data.success?(j(d+1),g("disliked"),null!==p&&(h(null),s(r-1))):alert("Failed to dislike")}))},children:["disliked"===O?Object(W.jsx)(et.a,{style:{fontSize:20}}):Object(W.jsx)(ct.a,{style:{fontSize:20}}),Object(W.jsx)(y.a,{style:{marginLeft:"5px",fontSize:"16"},children:d})]})})]})},st=M.a.create({baseURL:"https://calm-fortress-17635.herokuapp.com"});function ot(e){var t=new Date,a=t.getDate()+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]+" "+t.getFullYear(),i=c.a.useState(!1),r=Object(f.a)(i,2),s=r[0],o=r[1],l=Object(n.useState)(""),d=Object(f.a)(l,2),j=d[0],u=d[1],b=JSON.parse(localStorage.getItem("profile")),p=function(t){t.preventDefault();var a={writer:e.user.result._id,postId:e.postId,responseTo:e.comment._id,content:j};st.post("/comment/saveComment",a).then((function(t){t.data.success?(u(""),e.refreshFunction(t.data.result)):alert("Failed to comment!")}))};return Object(W.jsx)("div",{children:Object(W.jsxs)(Z.a,{sx:{maxWidth:345},elevation:3,children:[Object(W.jsx)(Q.a,{avatar:Object(W.jsx)(v.a,{children:e.comment.writer.name.charAt(0)+e.comment.writer.name.split(" ")[1].charAt(0)}),title:e.comment.writer.name,subheader:a}),Object(W.jsx)(Fe.a,{children:Object(W.jsx)(y.a,{variant:"body2",children:e.comment.content})}),Object(W.jsxs)(Ze.a,{children:[Object(W.jsx)("div",{style:{flexBasis:"90%"},children:Object(W.jsx)(rt,{commentId:e.comment._id,userId:b.result._id})}),Object(W.jsx)("div",{style:{position:"relative",flexBasis:"10%"},children:Object(W.jsx)(k.a,{onClick:function(){o(!s)},variant:"standard",children:Object(W.jsx)(y.a,{variant:"body2",color:"textSecondary",children:s?"Close":"Reply"})})})]}),Object(W.jsx)(X.a,{in:s,timeout:"auto",unmountOnExit:!0,children:Object(W.jsxs)(Fe.a,{children:[Object(W.jsx)($e,{user:e.user,comment:e.comment,commentList:e.commentList,postID:e.postId,parentCommentId:e.comment._id,refreshFunction:e.refreshFunction}),Object(W.jsxs)("form",{style:{display:"flex"},onSubmit:p,children:[Object(W.jsx)(T.a,{onChange:function(e){u(e.currentTarget.value)},value:j,variant:"filled",fullWidth:!0,size:"small",label:"Add a reply..."}),Object(W.jsx)("br",{}),Object(W.jsxs)(k.a,{style:{marginLeft:"5px"},variant:"contained",disableElevation:!0,color:"inherit",onClick:p,children:[" ",Object(W.jsx)(qe.a,{})," "]})]})]})})]})})}var lt=M.a.create({baseURL:"https://calm-fortress-17635.herokuapp.com"});var dt=function(e){var t=Object(n.useState)(""),a=Object(f.a)(t,2),i=a[0],r=a[1],s=JSON.parse(localStorage.getItem("profile")),o=function(t){t.preventDefault();var a={content:i,writer:s.result._id,postId:e.postId};lt.post("/comment/saveComment",a).then((function(t){t.data.success?(r(""),e.refreshFunction(t.data.result)):alert("Failed to comment!")}))},l=e.commentList.slice(0).reverse();return Object(W.jsxs)("div",{children:[Object(W.jsx)("div",{children:Object(W.jsxs)(y.a,{color:"textSecondry",style:{fontSize:"16",color:"grey",marginTop:"10px"},children:[" ",e.commentList.length," Comments "]})}),Object(W.jsx)("hr",{}),Object(W.jsxs)("form",{style:{display:"flex"},onSubmit:o,children:[Object(W.jsx)(T.a,{onChange:function(e){r(e.currentTarget.value)},value:i,variant:"outlined",required:!0,fullWidth:!0,size:"small",placeholder:"Add a public comment..."}),Object(W.jsx)("br",{}),Object(W.jsxs)(k.a,{style:{marginLeft:"5px"},variant:"contained",disableElevation:!0,color:"primary",onClick:o,children:[" ",Object(W.jsx)(qe.a,{})," "]})]}),e.commentList&&l.map((function(t,a){return!t.responseTo&&Object(W.jsx)(c.a.Fragment,{children:Object(W.jsx)(ot,{user:s,comment:t,postId:e.postId,refreshFunction:e.refreshFunction,commentList:e.commentList})})}))]})},jt=Object(N.a)((function(e){return{heading:{fontSize:e.typography.pxToRem(25)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary,paddingTop:"5px"},column:{flexBasis:"50%"}}})),ut=M.a.create({baseURL:"https://calm-fortress-17635.herokuapp.com"});function bt(e){var t=e.children,a=e.value,n=e.index,c=Object(Ie.a)(e,["children","value","index"]);return Object(W.jsx)("div",Object(O.a)(Object(O.a)({role:"tabpanel",hidden:a!==n,id:"full-width-tabpanel-".concat(n),"aria-labelledby":"full-width-tab-".concat(n)},c),{},{children:a===n&&Object(W.jsx)(_e.a,{sx:{p:2},children:Object(W.jsx)(y.a,{children:t})})}))}function pt(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}var ht=function(e){var t=jt(),a=Object(Ge.a)(),c=e.match.params.videoId,i=Object(n.useState)(""),r=Object(f.a)(i,2),s=r[0],o=r[1],l=Object(n.useState)(""),d=Object(f.a)(l,2),u=d[0],b=d[1],p=Object(n.useState)([]),h=Object(f.a)(p,2),m=h[0],x=h[1],g=Object(n.useState)(0),v=Object(f.a)(g,2),k=v[0],w=v[1],C=Object(n.useState)(""),I=Object(f.a)(C,2),N=I[0],L=I[1],T=Object(n.useState)(0),F=Object(f.a)(T,2),D=F[0],P=F[1],A=JSON.parse(localStorage.getItem("profile"));return console.log(c),Object(n.useEffect)((function(){ut.post("/video/getVideo",{videoId:c}).then((function(e){e.data.success?(o(e.data.video.filePath),b(e.data.video),L(e.data.video.writer.name),w(e.data.video.views)):alert("Failed to fetch video info. Server Error")})),ut.post("/comment/getComments",{videoId:c}).then((function(e){e.data.success?(console.log("Comment is : ",e.data.comments),x(e.data.comments)):alert("Failed to fetch video info. Server Error")}))}),[]),Object(W.jsxs)(j.a,{children:[Object(W.jsxs)("div",{style:{marginTop:"20px",display:"block",position:"-webkit-sticky",zIndex:"1000",top:"100px",backgroundColor:"#ffffff"},children:[Object(W.jsx)(j.a,{style:{marginTop:"20px",display:"block",position:"sticky"},disableGutters:"true",children:Object(W.jsx)(Le.a,{controls:!0,url:"".concat("https://calm-fortress-17635.herokuapp.com","/uploads/").concat(s.split("/").slice(-1).pop()),onPlay:function(){ut.post("/video/view",u).then((function(e){console.log(e.data)})),w(k+1)},width:"100%"})}),Object(W.jsx)(j.a,{style:{marginTop:"0px",position:"relative"},disableGutters:"true",children:Object(W.jsxs)(Te.a,{children:[Object(W.jsxs)(We.a,{expandIcon:Object(W.jsx)(ze.a,{}),children:[Object(W.jsx)("div",{className:t.column,children:Object(W.jsxs)(y.a,{variant:"h4",className:t.heading,style:{fontWeight:"Bold"},children:[u.title,Object(W.jsxs)(y.a,{className:t.secondaryHeading,children:[k," views"]})]})}),Object(W.jsx)("div",{className:t.column,style:{position:"relative"},children:Object(W.jsxs)(S.a,{container:!0,spacing:0,direction:"row",justifyContent:"flex-end",alignItems:"center",children:[Object(W.jsx)(S.a,{item:!0,xs:8,style:{marginTop:"1px"},children:Object(W.jsx)(rt,{videoId:c,userId:A.result._id})}),Object(W.jsx)(S.a,{item:!0,xs:4,children:Object(W.jsx)(He,{})})]})})]}),Object(W.jsx)(Be.a,{children:Object(W.jsxs)("div",{children:[Object(W.jsx)(y.a,{variant:"h3",className:t.heading,style:{fontSize:"24",color:"#616161"},children:N}),Object(W.jsx)(y.a,{variant:"body1",className:t.heading,style:{fontSize:"16",color:"#424242"},children:u.description})]})})]})}),Object(W.jsx)(le.a,{style:{marginTop:"20px"},position:"static",color:"inherit",elevation:1,children:Object(W.jsxs)(Je.a,{value:D,onChange:function(e,t){P(t)},indicatorColor:"secondary",textColor:"secondary",variant:"fullWidth",children:[Object(W.jsx)(Ee.a,Object(O.a)({label:"Recommended"},pt(0))),Object(W.jsx)(Ee.a,Object(O.a)({label:"Comment"},pt(1)))]})})]}),Object(W.jsxs)(Ve.a,{axis:"rtl"===a.direction?"x-reverse":"x",index:D,onChangeIndex:function(e){P(e)},children:[Object(W.jsx)(bt,{value:D,index:0,dir:a.direction,children:Object(W.jsx)(j.a,{style:{marginTop:"20px"},disableGutters:"true",children:Object(W.jsx)(Re,{})})}),Object(W.jsx)(bt,{value:D,index:1,dir:a.direction,children:Object(W.jsx)(dt,{commentList:m,postId:c,refreshFunction:function(e){x(m.concat(e))}})})]})]})},mt=M.a.create({baseURL:"https://calm-fortress-17635.herokuapp.com"});var xt=function(){var e=JSON.parse(localStorage.getItem("profile")),t=Object(n.useState)([]),a=Object(f.a)(t,2),c=(a[0],a[1]);return Object(n.useEffect)((function(){mt.post("/like/getLiked",{userId:e.result._id}).then((function(e){e.data.success?(console.log(e.data),c(e.data.likes.videoId)):alert("Failed to get liked videos")}))})),Object(W.jsx)(j.a,{children:Object(W.jsx)(S.a,{children:Object(W.jsxs)(y.a,{variant:"h2",children:["Hi, ",e.result.name]})})})},Ot=function(){return Object(W.jsx)(u.a,{children:Object(W.jsxs)(j.a,{maxWidth:"lg",disableGutters:"true",children:[Object(W.jsx)(Oe,{}),Object(W.jsxs)(b.c,{children:[Object(W.jsx)(b.a,{path:"/",exact:!0,component:q}),Object(W.jsx)(b.a,{path:"/homepage",exact:!0,component:oe}),Object(W.jsx)(b.a,{path:"/upload",exact:!0,component:Ce}),Object(W.jsx)(b.a,{path:"/profile",exact:!0,component:xt}),Object(W.jsx)(b.a,{path:"/:videoId",exact:!0,component:ht})]})]})})},ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authData:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return localStorage.setItem("profile",JSON.stringify(Object(O.a)({},null===t||void 0===t?void 0:t.data))),Object(O.a)(Object(O.a)({},e),{},{authData:null===t||void 0===t?void 0:t.data});case E:return localStorage.clear(),Object(O.a)(Object(O.a)({},e),{},{authData:null});default:return e}},gt=Object(o.combineReducers)({auth:ft});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var vt=Object(o.createStore)(gt,Object(l.composeWithDevTools)(Object(o.applyMiddleware)(d.a)));r.a.render(Object(W.jsx)(s.a,{store:vt,children:Object(W.jsx)(Ot,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[372,1,2]]]);
//# sourceMappingURL=main.62ad5f7a.chunk.js.map